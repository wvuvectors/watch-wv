#############################################
Initiated patchr.sh
2023-11-27_17-07

See logs/patchr/patchr.2023-11-27_17-07.log for warnings, errors, and other important information.
In the event of a catastrophic error, run
  ./sh/rollBack.sh /Users/tpd0001/github/watch-wv/patchr/resources/RUN_TEST
at any point to restore the original files. Then fix the error(s) and run patchr again.

******
Running prepRun.sh.
******
Switching to run directory /Users/tpd0001/github/watch-wv/patchr/resources/RUN_TEST.
Creating directory /restore/ to hold the original data files.
Preparing run files in /Users/tpd0001/github/watch-wv/patchr/resources/RUN_TEST.
Backing up csv file AP42_ANALYZED.csv to /Users/tpd0001/github/watch-wv/patchr/resources/RUN_TEST/restore/.
Repairing known issues in AP42_ANALYZED.csv.
Done.
File AP42_ANALYZED.csv appears to be a ddPCR results file.
  Fixing known incompatibilities in AP42_ANALYZED.csv.
Done.
Backing up csv file asset_08262022_024441.csv to /Users/tpd0001/github/watch-wv/patchr/resources/RUN_TEST/restore/.
Repairing known issues in asset_08262022_024441.csv.
Done.
File asset_08262022_024441.csv appears to be an asset file.
It has been backed up to restore/ but will be ignored.
You may want to process this file separately, using perl/2_updateSamples.pl.
Backing up xlsx file ABATCH.v2TEST.xlsx to /Users/tpd0001/github/watch-wv/patchr/resources/RUN_TEST/restore/.
Backing up xlsx file CBATCH.v2TEST_a.xlsx to /Users/tpd0001/github/watch-wv/patchr/resources/RUN_TEST/restore/.
Backing up xlsx file CBATCH.v2TEST_b.xlsx to /Users/tpd0001/github/watch-wv/patchr/resources/RUN_TEST/restore/.
Backing up xlsx file EBATCH.v2TEST.xlsx to /Users/tpd0001/github/watch-wv/patchr/resources/RUN_TEST/restore/.
Backing up xlsx file RBATCH.v2TEST.xlsx to /Users/tpd0001/github/watch-wv/patchr/resources/RUN_TEST/restore/.

******
Running 1_compileRun.pl.
******

******
Running 2_validateRun.pl.
******
Validating ids from existing WaTCH database tables...
Retrieving ids from WaTCH table abatch
Retrieving ids from WaTCH table rbatch
Retrieving ids from WaTCH table assay
Retrieving ids from WaTCH table archive
Retrieving ids from WaTCH table concentration
Retrieving ids from WaTCH table ebatch
Retrieving ids from WaTCH table control
Retrieving ids from WaTCH table cbatch
Retrieving ids from WaTCH table extraction
Done.

-------------------------------
WaTCH internal validation results (data/latest):
TABLE        	WaTCH IDS    	DUPLICATES   
abatch       	0            	0            
rbatch       	0            	0            
assay        	0            	0            
archive      	0            	0            
concentration	0            	0            
ebatch       	0            	0            
control      	0            	0            
cbatch       	0            	0            
extraction   	0            	0            
-------------------------------

Validating ids from run update tables...
Done.

-------------------------------
Run validation results (/Users/tpd0001/github/watch-wv/patchr/resources/RUN_TEST):
TABLE        	UPDATE IDS   	DUPLICATES   	COLLISIONS   
assay        	102          	0            	0            
archive      	18           	0            	0            
abatch       	1            	0            	0            
rbatch       	1            	0            	0            
control      	4            	0            	0            
extraction   	36           	0            	0            
cbatch       	2            	0            	0            
ebatch       	1            	0            	0            
concentration	36           	0            	0            
-------------------------------


Ok, I'm about to start working with the watchdb files in data/latest/.
Backing up data/latest/ to data/latest_bk/.
Creating a new version of watchdb in data/incremental/2023-11-27_17-07/.
It will be updated with data from the run in /Users/tpd0001/github/watch-wv/patchr/resources/RUN_TEST.
Merging the run update tables with their corresponding watchdb tables.
This can be accomplished with a simple cat since there should be no duplicate IDs after a successful validateRun.
A sample update will NOT be applied (/Users/tpd0001/github/watch-wv/patchr/resources/RUN_TEST/updates/update.sample.txt does not exist).
